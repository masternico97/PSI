{% extends "mouse_cat/base.html" %}
{% load staticfiles %}

{% if board %}
    <table id="chess_board">
    {% for item in board %}
        {% if forloop.counter0|divisibleby:8 %}
            <tr>
        {% endif %}
        <td id="cell_{{ forloop.counter0 }}" ondrop="drop(event)" ondragover="allowDrop(event)">
            <div id="blank_cell_{{ forloop.counter0 }}" class="blank_cell">
            {% if item ==  0 %}
            {% elif item == 1 %}<img id="duck_hunt_{{ forloop.counter0 }}" class="draggable" ondragstart="drag(event)" src="{% static 'images/duck_hunt.png' %}" alt="Hound">
            {% else %}<img id="tails" class="draggable" ondragstart="drag(event)" src="{% static 'images/tails.png' %}" alt="Fox">
            {% endif %}
            </div>
        </td>
        {% if forloop.counter|divisibleby:8 or forloop.last %}
            </tr>
        {% endif %}
    {% endfor %}
    </table>
{% endif %}
{% if game.cat_user.id == request.user.id %}
    <div class="content_wrapper">
    {% if game.status == 2 %}
            <div id="wait_message">
                <img src="{% static 'images/fox_wait.gif' %}" alt="Fox">
                <br>
                <p>The fox is playing, please wait for it.</p>
            </div>
    {% else %}
            <p id="endgame_message_content">
                {% if game.winner == 1 %}
                    You lost. Better luck nex time!
                {% else %}
                    <img src="{% static 'images/fireworks.gif' %}" alt="Fireworks">
                    You won! Congratulations!
                    <img src="{% static 'images/fireworks.gif' %}" alt="Fireworks">
                {% endif %}
            </p>
    {% endif %}
    </div>
{% else %}
    {% if game.status == 2 %}
        <form id="move_form" method="post" action="{% url 'move' %}">
            {% csrf_token %}
            <div id="game_error_wrapper">
                {{ move_form }}
                <input id="move_button" type="submit" value="Move">
            </div>
        </form>
    {% else %}
        <div class="content_wrapper">
            <p id="endgame_message_content">
                {% if game.winner == 1 %}
                    <img src="{% static 'images/fireworks.gif' %}" alt="Fireworks">
                    You won! Congratulations!
                    <img src="{% static 'images/fireworks.gif' %}" alt="Fireworks">
                {% else %}
                    You lost. Better luck next time!
                {% endif %}
            </p>
        </div>
    {% endif %}
{% endif %}
